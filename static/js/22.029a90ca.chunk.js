(window["webpackJsonpreact-antd-admin"]=window["webpackJsonpreact-antd-admin"]||[]).push([[22],{467:function(e,t,a){},528:function(e,t,a){e.exports=a.p+"static/media/react.8e26f220.svg"},898:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a.n(n),l=a(41),o=a(78),c=a(79),i=a(80),s=a(81),m=a(82),u=(a(433),a(468)),d=a(0),p=a.n(d),h=(a(243),a(34)),g=(a(434),a(340)),b=a(44),y=Object(b.a)(Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(15)]).then(a.bind(null,896)),!0),f=Object(b.a)(Promise.all([a.e(0),a.e(7)]).then(a.bind(null,900)),!0),E=Object(b.a)(Promise.all([a.e(0),a.e(1),a.e(2),a.e(4),a.e(16)]).then(a.bind(null,899)),!0),k=Object(b.a)(Promise.all([a.e(0),a.e(18),a.e(28)]).then(a.bind(null,888)),!0),v=Object(b.a)(Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(17)]).then(a.bind(null,889)),!0),C=Object(b.a)(Promise.all([a.e(4),a.e(21)]).then(a.bind(null,890)),!0),j=Object(b.a)(Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(13)]).then(a.bind(null,897)),!0),O=Object(b.a)(Promise.all([a.e(0),a.e(20),a.e(24)]).then(a.bind(null,891)),!0),S=Object(b.a)(Promise.all([a.e(0),a.e(1),a.e(6),a.e(26)]).then(a.bind(null,892)),!0),w=Object(b.a)(Promise.all([a.e(0),a.e(1),a.e(6),a.e(27)]).then(a.bind(null,893)),!0),x=Object(b.a)(Promise.all([a.e(0),a.e(4),a.e(19),a.e(23)]).then(a.bind(null,894)),!0),I=Object(b.a)(Promise.all([a.e(0),a.e(14),a.e(25)]).then(a.bind(null,895)),!0),P=[{name:"\u9996\u9875",icon:"home",key:"Home"},{name:"\u6743\u9650\u7ba1\u7406",icon:"lock",key:"Users"},{name:"\u7ec4\u4ef6",icon:"appstore",key:"components",children:[{name:"\u5bcc\u6587\u672c\u7f16\u8f91\u5668",icon:"",key:"Tinymce"},{name:"\u5934\u50cf\u4e0a\u4f20",icon:"",key:"AvatarUpload"},{name:"\u5217\u8868\u62d6\u62fd",icon:"",key:"DndList"}]},{name:"\u7ed3\u679c\u9875\u9762",icon:"question-circle",key:"error",children:[{name:"403",icon:"",key:"ErrorThird"},{name:"404",icon:"",key:"ErrorFour"}]},{name:"\u680f\u76ee\u7ba1\u7406",icon:"project",key:"Columns",children:[{name:"\u54c1\u724c\u5217\u8868",icon:"",key:"BrandList"}]},{name:"\u7cfb\u7edf\u7ba1\u7406",icon:"setting",key:"System"},{name:"\u804a\u5929\u5ba4",icon:"qq",key:"Chat"},{name:"\u7559\u8a00\u677f",icon:"message",key:"MessageBoard"},{name:"\u5173\u4e8e",icon:"info-circle",key:"About"}],A={Users:p.a.createElement(y,null),About:p.a.createElement(f,null),MessageBoard:p.a.createElement(E,null),Home:p.a.createElement(k,null),System:p.a.createElement(v,null),BrandList:p.a.createElement(j,null),BackToTop:p.a.createElement(O,null),ErrorFour:p.a.createElement(w,null),ErrorThird:p.a.createElement(S,null),Tinymce:p.a.createElement(x,null),DndList:p.a.createElement(I,null),Chat:p.a.createElement(C,null)},F=g.a.SubMenu,M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).renderMenu=function(e){if(Array.isArray(e))return e.map(function(e){return e.children&&e.children.length?p.a.createElement(F,{key:e.key,title:p.a.createElement("span",null,e.icon&&p.a.createElement(h.a,{type:e.icon}),p.a.createElement("span",null,e.name))},a.renderMenu(e.children)):p.a.createElement(g.a.Item,{key:e.key||e.name},p.a.createElement("div",{onClick:function(){return a.addPane(e)}},e.icon&&p.a.createElement(h.a,{type:e.icon}),p.a.createElement("span",null,e.name)))})},a.addPane=function(e){var t=a.props.panes.slice(),n=e.key;t.find(function(e){return e.key===n})||t.push({name:e.name,key:e.key,content:A[e.key]||e.name}),a.props.onChangeState({panes:t,activeMenu:n})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.activeMenu,n=e.theme;return p.a.createElement("div",{className:"my-sider ".concat(n)},p.a.createElement("div",{className:"sider-menu-logo ".concat(n)},p.a.createElement("a",{href:"https://ant.design/docs/react/introduce-cn",target:"_blank",rel:"noopener noreferrer"},p.a.createElement("img",{src:a(528),alt:""}),p.a.createElement("h1",null,"\u540e\u53f0\u7ba1\u7406\u7cfb\u7edf"))),p.a.createElement(g.a,{theme:n,mode:"inline",selectedKeys:[t],style:{paddingTop:16}},this.renderMenu(P)))}}]),t}(p.a.Component),B=(a(129),a(91)),N=(a(348),a(390)),V=a(530),D=a.n(V),T=a(531),z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={displayColorPicker:!1,color:""},a.handleClick=function(){a.setState({displayColorPicker:!a.state.displayColorPicker})},a.handleClose=function(){a.setState({displayColorPicker:!1})},a.handleChange=function(e){a.props.onChange(e.hex),a.setState({color:e.hex})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={color:{width:"14px",height:"14px",borderRadius:"2px",background:this.state.color},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0",right:"0",bottom:"0",left:"0"}};return p.a.createElement("div",{style:{lineHeight:"15px"}},p.a.createElement("div",{style:e.swatch,onClick:this.handleClick},p.a.createElement("div",{style:e.color})),this.state.displayColorPicker?p.a.createElement("div",{style:e.popover},p.a.createElement("div",{style:e.cover,onClick:this.handleClose}),p.a.createElement(T.SketchPicker,Object.assign({},this.props,{color:this.state.color,onChange:this.handleChange}))):null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.color&&e.color!==t.color?{color:e.color}:null}}]),t}(p.a.Component);z.defaultProps={color:"",onChange:function(){},presetColors:["#F5222D","#FA541C","#FA8C16","#FAAD14","#FADB14","#A0D911","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],disableAlpha:!0};var _,L=z,R=a(209),U=a(87),q=h.a.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1394250_t5rc9h6jnj.js"}),H=g.a.SubMenu,J=g.a.ItemGroup,K=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(i.a)(this,Object(s.a)(t).call(this,e))).toggleCollapsed=function(){a.props.onChangeState({collapsed:!a.props.collapsed})},a.toggleFullscreen=function(){D.a.enabled&&D.a.toggle().then(function(){a.setState({isFullscreen:D.a.isFullscreen})})},a.changeColor=function(e){window.less.modifyVars({"@primary-color":e}).then(function(){localStorage.setItem("user-theme",JSON.stringify({"@primary-color":e})),a.setState({color:e}),N.a.success("\u66f4\u6362\u4e3b\u9898\u989c\u8272\u6210\u529f")})},a.resetColor=function(){a.changeColor("#13C2C2")},a.toggleInfoVisible=function(e){a.setState({infoVisible:e})},a.togglePasswordVisible=function(e){a.setState({passwordVisible:e})},a.onLogout=function(){logout(),a.props.history.push("/login")},a.changeTheme=function(){var e="dark"===a.props.theme?"light":"dark";localStorage.setItem("theme",e),a.props.onChangeState({theme:e})};var n=JSON.parse(localStorage.getItem("user-theme")),r="#13C2C2";return n&&(window.less.modifyVars(n),r=n["@primary-color"]),a.state={isFullscreen:!1,color:r,infoVisible:!1,passwordVisible:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isFullscreen,n=t.color,r=(t.infoVisible,t.passwordVisible,this.props);r.user,r.theme;return p.a.createElement("div",{style:{background:"#fff",padding:"0 16px"}},p.a.createElement(h.a,{className:"trigger",type:this.props.collapsed?"menu-unfold":"menu-fold",onClick:this.toggleCollapsed}),p.a.createElement("div",{style:W.headerRight},p.a.createElement("div",{style:W.headerItem},p.a.createElement(L,{color:n,onChange:this.changeColor})),p.a.createElement("div",{style:W.headerItem},p.a.createElement(q,{type:"icondeng-mingan",style:{fontSize:24},onClick:this.changeTheme})),p.a.createElement("div",{style:W.headerItem},p.a.createElement(h.a,{type:a?"fullscreen-exit":"fullscreen",onClick:this.toggleFullscreen,style:{fontSize:24}})),p.a.createElement("div",{style:W.headerItem},p.a.createElement(g.a,{mode:"horizontal",selectable:!1},p.a.createElement(H,{title:p.a.createElement("div",{style:W.avatarBox},p.a.createElement(B.a,{size:"small",icon:"user",style:W.avatarIcon}),"\xa0",p.a.createElement("span",null,"Admin"))},p.a.createElement(J,{title:"\u7528\u6237\u4e2d\u5fc3"},p.a.createElement(g.a.Item,{key:1,onClick:function(){return e.toggleInfoVisible(!0)}},p.a.createElement(h.a,{type:"user"}),"\u7f16\u8f91\u4e2a\u4eba\u4fe1\u606f"),p.a.createElement(g.a.Item,{key:77,onClick:function(){return e.togglePasswordVisible(!0)}},p.a.createElement(h.a,{type:"edit"}),"\u4fee\u6539\u5bc6\u7801"),p.a.createElement(g.a.Item,{key:2,onClick:this.onLogout},p.a.createElement(h.a,{type:"logout"}),"\u9000\u51fa\u767b\u5f55")),p.a.createElement(J,{title:"\u8bbe\u7f6e\u4e2d\u5fc3"},p.a.createElement(g.a.Item,{key:4,onClick:this.resetColor},p.a.createElement(h.a,{type:"ant-design"}),"\u6062\u590d\u9ed8\u8ba4\u4e3b\u9898")))))))}}]),t}(p.a.Component),W={headerRight:{float:"right",display:"flex",height:64,marginRight:50},headerItem:{display:"flex",alignItems:"center",padding:"0 8px",fontSize:"18px",color:"#5a5e66",verticalAlign:"text-bottom"},avatarBox:{display:"flex",alignItems:"center"},avatarIcon:{backgroundColor:"transparent",color:"#666"}},G=Object(R.d)(K),Y=(a(656),a(659)),Q=(a(247),a(249)),X=(a(467),u.a.Footer),Z=Q.a.TabPane,$=["".concat("/react-antd-admin","/bg1.jpg"),"http://pic1.win4000.com/wallpaper/c/53cdd1fad4bcb.jpg"],ee=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).onChange=function(e){a.props.onChangeState({activeMenu:e})},a.onEdit=function(e,t){"remove"===t&&a.remove(e)},a.remove=function(e){var t=a.props.activeMenu,n=a.props.panes.slice(),r=n.findIndex(function(t){return t.key===e})-1;r=Math.max(r,0),n=n.filter(function(t){return t.key!==e}),e===t&&(t=n[r]?n[r].key:""),a.props.onChangeState({activeMenu:t,panes:n})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.panes,a=e.activeMenu;return p.a.createElement("div",{className:"content-container"},t.length?p.a.createElement(Q.a,{style:{height:"100%"},tabBarStyle:{background:"#f0f2f5",marginBottom:0},onEdit:this.onEdit,onChange:this.onChange,activeKey:a,type:"editable-card",hideAdd:!0},t.map(function(e){return p.a.createElement(Z,{key:e.key,tab:e.name},p.a.createElement("div",{className:"tabpane-box"},e.content),p.a.createElement(X,{style:{textAlign:"center",background:"#fff"}},"React-Admin \xa9",(new Date).getFullYear()," Created by 1131821869@qq.com ",p.a.createElement("a",{target:"_blank",href:"https://github.com/lhongtao",rel:"noopener noreferrer"},p.a.createElement(h.a,{type:"github"}))))})):p.a.createElement("div",{className:"bg-box"},p.a.createElement(Y.a,{className:"bg-size",autoplay:!0,autoplaySpeed:5e3},$.map(function(e){return p.a.createElement("div",{className:"bg-size",key:e},p.a.createElement("img",{src:e,alt:"",style:{width:"100%",height:"100%"}}))}))))}}]),t}(p.a.Component),te=a(32),ae=a(23),ne=Object(U.b)(function(e){return{user:e.user,websocket:e.websocket}},function(e){return Object(ae.b)({getUser:te.f,initWebsocket:te.h},e)}),re=u.a.Header,le=u.a.Sider,oe=u.a.Content,ce=ne(_=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),m=0;m<n;m++)c[m]=arguments[m];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={collapsed:!1,panes:[],activeMenu:"",theme:localStorage.getItem("theme")||"dark"},a.init=Object(l.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("username"),e.next=3,a.props.getUser({username:t});case 3:console.log(a.props.user),a.props.initWebsocket(a.props.user);case 5:case"end":return e.stop()}},e)})),a._setState=function(e){a.setState(e)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"render",value:function(){var e=this.state,t=e.collapsed,a=e.panes,n=e.activeMenu,r=e.theme;return p.a.createElement(u.a,{style:{height:"100vh"},className:"layou-app"},p.a.createElement(le,{trigger:null,collapsible:!0,collapsed:this.state.collapsed},p.a.createElement(M,{theme:r,panes:a,activeMenu:n,onChangeState:this._setState})),p.a.createElement(u.a,null,p.a.createElement(re,{style:{background:"#fff",padding:0}},p.a.createElement(G,{theme:r,collapsed:t,onChangeState:this._setState})),p.a.createElement(oe,null,p.a.createElement(ee,{panes:a,activeMenu:n,onChangeState:this._setState}))))}}]),t}(p.a.Component))||_;t.default=ce}}]);